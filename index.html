<!DOCTYPE html>
<html lang="en">

<head>
    <title>Aqua Drain and Waterworks</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/font-awesome.min.css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link href="css/site.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body id="myPage">

    <table id="headersTable">
        <tr>
            <td>

            </td>
        </tr>
        <tr>
            <td class="headerLabel">DRAIN</td>
            <td class="headerLabel">WATER SERVICE</td>
            <td class="headerLabel">WATERPROOFING</td>
            <td class="headerLabel">EMERGENCY PLUMBING</td>
            <td class="headerLabel">PROMOTION</td>
        </tr>
    </table>

    <footer class="container-fluid text-center">
        <a href="#myPage" title="To Top">
            <span class="glyphicon glyphicon-chevron-up"></span>
            <p>ololo© 2016 Aqua Drain and Waterworks</p>
        </a>
    </footer>

    <script>
        $(document)
            .ready(function () {

                // Add smooth scrolling to all links in navbar + footer link
                $(".navbar a, footer a[href='#myPage']")
                    .on('click',
                    function (event) {
                        // Make sure this.hash has a value before overriding default behavior
                        if (this.hash !== "") {
                            // Prevent default anchor click behavior
                            event.preventDefault();

                            // Store hash
                            var hash = this.hash;

                            // Using jQuery's animate() method to add smooth page scroll
                            // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                            $('html, body')
                                .animate({
                                    scrollTop: $(hash).offset().top
                                },
                                900,
                                function () {

                                    // Add hash (#) to URL when done scrolling (default click behavior)
                                    window.location.hash = hash;
                                });
                        } // End if
                    });

                $(window)
                    .scroll(function () {
                        $(".slideanim")
                            .each(function () {
                                var pos = $(this).offset().top;

                                var winTop = $(window).scrollTop();
                                if (pos < winTop + 600) {
                                    $(this).addClass("slide");
                                }
                            });
                    });

                $('form')
                    .submit(function (event) {
                        event.preventDefault();

                        var data = {
                            Name: $('#name').val(),
                            Phone: $('#phone').val(),
                            Email: $('#email').val(),
                            Comments: $('#comments').val()
                        };

                        $(function () {
                            $("#btnSubmit").prop("disabled", true);
                            $("#btnSubmit").button('loading');
                        });

                        $.ajax({
                            type: "POST",
                            url: "http://aquadrainservice.azurewebsites.net/api/estimate",
                            data: { "name": $("#name").val(), "phone": $("#phone").val(), "email": $("#email").val(), "comments": $("#comments").val() },
                            crossDomain: true,
                            success: function (msg) {
                                $("#alertSuccess").alert();

                                if (msg.success) {
                                    $('#formComment').trigger('reset');
                                    $("#modalSuccess").modal();
                                } else {
                                    if (msg.hasOwnProperty("internalError")) {
                                        console.log(msg.internalError + " " + msg.errors.join(";"));
                                        $("#modalInternalError").modal();
                                    }
                                    else {
                                        var list = $("#listValidateErrors");
                                        list.empty();

                                        for (var i = 0; i < msg.errors.length; i++)
                                            list.append("<li>" + msg.errors[i] + "</li>");

                                        $("#modalValidationError").modal();
                                    }
                                }

                                console.log("receive success");
                            },
                            error: function (msg) {
                                $("#modalInternalError").modal();
                                console.log("receive error");
                            },
                            complete: function (msg) {
                                $("#btnSubmit").prop("disabled", false);
                                $("#btnSubmit").button('reset');
                                console.log("receive complete");
                            }
                        });
                    });

            })
    </script>

</body>

</html>