<!DOCTYPE html>
<html lang="en">

<head>
    <title>Aqua Drain and Waterworks</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/site.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="shortcut icon" href="./favicon.png"> 
</head>

<body>

    <div id="xHeader">
        <a href="#">
            <img id="logo" src="images/logo.svg" />
        </a>
        <div id="xPhoneAndHeaders">
            <div id="xPhone">
                <span id="labelPhone" class="phoneLabel">647 979 3347</span>
                <span id="labelCallWorld" class="phoneLabel">CALL</span>
                <img id="labelMapleLeaf" src="images/mapleLeaf.svg" />
            </div>
            <div id="xHeaders">
                <div class="headerLabelCell" id="drainHeader">
                    DRAIN
                </div>
                <div class="headerLabelCell" id="waterServiceHeader">
                    WATER SERVICE
                </div>
                <div class="headerLabelCell" id="waterProofingHeader">
                    WATERPROOFING
                </div>
                <div class="headerLabelCell" id="emergencyPlumbingHeader">
                    EMERGENCY PLUMBING
                </div>
                <div class="headerLabelCell" id="promotionHeader">
                    PROMOTION
                </div>
            </div>
            <div id="xMinimizedHeaders">
                <img id="hamburgerIcon" 
                     src="images/hamburgerMenu.svg">
                <ul id="xHeadersMenu">
                    <li id="subDrainHeader">DRAIN</li>
                    <li id="subWaterServiceHeader">WATER SERVICE</li>
                    <li id="subWaterProofingHeader">WATERPROOFING</li>
                    <li id="subEmergencyPlumbingHeader">EMERGENCY PLUMBING</li>
                    <li id="subPromotionHeader">PROMOTION</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="backgroundFiller">
        <div>
            <div>AQUA DRAIN</div>
            <div>&amp;</div>
            <div>WATERWORKS</div>
        </div>
    </div>

    <div id="content">
        <div class="xContent" id="mainContentTable">
            <div class="xChapterHeader">
                FREE ESTIMATE
            </div>
            <form id="formComment">
                <div id="phoneAndNameAndEmailSection">
                    <input id="name" class="entryField" placeholder="Name" type="text" required/>
                    <input id="phone" class="entryField" placeholder="Phone" type="text" required/>
                    <input id="email" class="entryField" placeholder="Email" type="email" required/>
                </div>
                <div>
                    <textarea id="comments" placeholder="How can we help you?" rows="5"></textarea>
                </div>
                <div id="formButtons">
                    <button type="submit" id="btnSubmit" data-loading-text="Sending...">Send</button>
                </div>
            </form>
        </div>

        <div class="xContent" id="drainContentTable">
            <div class="xChapterHeader">
                DRAIN
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    CAUSES
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    SOLUTIONS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    PLUMBER TIPS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
        </div>

        <div class="xContent" id="waterServiceContentTable">
            <div class="xChapterHeader">
                WATER SERVICE
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    CAUSES
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    SOLUTIONS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    PLUMBER TIPS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
        </div>

        <div class="xContent" id="waterProofingContentTable">
            <div class="xChapterHeader">
                WATERPROOFING
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    CAUSES
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    SOLUTIONS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    PLUMBER TIPS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
        </div>

        <div class="xContent" id="emergencyPlumbingContentTable">
            <div class="xChapterHeader">
                EMERGENCY PLUMBING
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    CAUSES
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    SOLUTIONS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    PLUMBER TIPS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
        </div>

        <div class="xContent" id="promotionContentTable">
            <div class="xChapterHeader">
                PROMOTION
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    CAUSES
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    SOLUTIONS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
            <div class="xChapterItem">
                <div class="xChapterItemHeader">
                    PLUMBER TIPS
                </div>
                <div class="xChapterItemContent">
                    We believe strongly that every home is unique. Each plumbing system has its own features, functions and intricacies. Various
                    problems that arise are unique to your property, no one else’s. So when we arrive at any service call,
                    this is the approach we take. It is an approach characterized by customization and personalization.
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div id="footerCopyright">&#9400; 2018 Aqua Drain and Waterworks</div>

        <div id="contactGroup">
            <a class="footerLabelRight footerMinimizableLabel" href="mailto:contact@aquadrain.org">
                <div class="iconTextPair">
                    <img class="footerIcon" src="images/email.svg" />
                    <div>contact@aquadrain.org</div>
                </div>
            </a>

            <a class="footerLabelRight" href="tel:6479793347">
                <div class="iconTextPair">
                    <img class="footerIcon" src="images/cellphone.svg" />
                    <div>647 979 3347</div>
                </div>
            </a>

            <a class="footerLabelRight footerMinimizableLabel" href="https://www.facebook.com/AquaDrainAndWaterworks/">
                <div class="iconTextPair">
                    <img class="footerIcon" src="images/facebook.svg" />
                    <div class="footerHiddenFooterIcon">facebook</div>
                </div>
            </a>
        </div>
    </footer>

    <script>
        $(document)
            .ready(function () {
                // Add smooth scrolling to all links in navbar + footer link

                const main = "mainContentTable";
                const drainContentTable = "drainContentTable";
                const waterServiceContentTable = "waterServiceContentTable";
                const waterProofingContentTable = "waterProofingContentTable";
                const emergencyPlumbingContentTable = "emergencyPlumbingContentTable";
                const promotionContentTable = "promotionContentTable";

                $("#drainHeader").click(function () {
                    console.log("drainHeader")
                    showContentTable(drainContentTable)
                })
                $("#subDrainHeader").click(function () {
                    console.log("drainHeader")
                    showContentTable(drainContentTable)
                })

                $("#waterServiceHeader").click(function () {
                    console.log("waterServiceHeader")
                    showContentTable(waterServiceContentTable)
                })
                $("#subWaterServiceHeader").click(function () {
                    console.log("waterServiceHeader")
                    showContentTable(waterServiceContentTable)
                })

                $("#waterProofingHeader").click(function () {
                    console.log("waterProofingHeader")
                    showContentTable(waterProofingContentTable)
                })
                $("#subWaterProofingHeader").click(function () {
                    console.log("waterProofingHeader")
                    showContentTable(waterProofingContentTable)
                })

                $("#emergencyPlumbingHeader").click(function () {
                    console.log("emergencyPlumbingHeader")
                    showContentTable(emergencyPlumbingContentTable)
                })
                $("#subEmergencyPlumbingHeader").click(function () {
                    console.log("emergencyPlumbingHeader")
                    showContentTable(emergencyPlumbingContentTable)
                })

                $("#promotionHeader").click(function () {
                    console.log("promotionHeader")
                    showContentTable(promotionContentTable)
                })
                $("#subPromotionHeader").click(function () {
                    console.log("promotionHeader")
                    showContentTable(promotionContentTable)
                })

                $("#xHeadersMenu").hide();
                $("#hamburgerIcon").click(function() {
                    $("#xHeadersMenu").toggle(300);
                });

                $(document).click(function(e) {
                    if ($(e.target)[0].id != "hamburgerIcon") {
                        $("#xHeadersMenu").hide(300);
                    }
                });

                let allChapters = [
                    {
                        contentName: main,
                        background: "backgroundMain.png",
                        pageHash: ""
                    },
                    {
                        contentName: drainContentTable,
                        background: "backgroundDrain.png",
                        pageHash: "drain"
                    },
                    {
                        contentName: waterServiceContentTable,
                        background: "backgroundDrain.png",
                        pageHash: "water-service"
                    },
                    {
                        contentName: waterProofingContentTable,
                        background: "backgroundDrain.png",
                        pageHash: "water-proofing"
                    },
                    {
                        contentName: emergencyPlumbingContentTable,
                        background: "backgroundDrain.png",
                        pageHash: "emergency-plumbing"
                    },
                    {
                        contentName: promotionContentTable,
                        background: "backgroundDrain.png",
                        pageHash: "promotion"
                    }
                ];

                allChapters.forEach(function (elementName) {
                    $("#" + elementName.contentName).hide();
                })

                processHashChange();

                // for ie support :(
                function findDescriptionByChapter (array, predicate){
                    for (i = 0; i < array.length; i++)
                    {
                        let el = array[i];
                        if (predicate(el))
                        {
                            return el;
                        }
                    }
                    return null;
                }

                window.onhashchange = function (e) {
                    processHashChange();
                }

                function processHashChange()
                {
                    var chapterDescription = findDescriptionByChapter(allChapters, function (el) {
                        return el.pageHash == window.location.hash.substring(1);
                    });

                    showContentTable(chapterDescription.contentName)
                }

                function showContentTable(chapterName) {
                    var chapterDescription = findDescriptionByChapter(allChapters, function (el) {
                        return el.contentName == chapterName;
                    });

                    window.location.hash = chapterDescription.pageHash;

                    allChapters.forEach(function (elementName) {
                        $("#" + elementName.contentName).hide();
                    })

                    $("#" + chapterName).show();
                    $("body").css('background-image', "url('../images/top.png'), url('../images/" + chapterDescription.background +"')");
                }

                $('form')
                    .submit(function (event) {
                        event.preventDefault();

                        var data = {
                            Name: $('#name').val(),
                            Phone: $('#phone').val(),
                            Email: $('#email').val(),
                            Comments: $('#comments').val()
                        };

                        $(function () {
                            $("#btnSubmit").prop("disabled", true);
                        });

                        $.ajax({
                            type: "POST",
                            url: "http://aquadrainservice.azurewebsites.net/api/estimate",
                            data: { "name": $("#name").val(), "phone": $("#phone").val(), "email": $("#email").val(), "comments": $("#comments").val() },
                            crossDomain: true,
                            success: function (msg) {
                                if (msg.success) {
                                    $('#formComment').trigger('reset');
                                    alert("Message has been sent. We will contact you soon!");
                                } else {
                                    if (msg.hasOwnProperty("internalError")) {
                                        console.log(msg.internalError + " " + msg.errors.join(";"));
                                        alert("Internal Error. Please use contact@aquadrain.org to contact us.");
                                    }
                                    else {
                                        var list = $("#listValidateErrors");
                                        list.empty();

                                        for (var i = 0; i < msg.errors.length; i++)
                                            list.append("<li>" + msg.errors[i] + "</li>");

                                        alert("Not all fields are filled. Please try again");
                                    }
                                }

                                console.log("receive success");
                            },
                            error: function (msg) {
                                alert("Internal Error. Please use contact@aquadrain.org to contact us.");
                                console.log("receive error");
                            },
                            complete: function (msg) {
                                $("#btnSubmit").prop("disabled", false);
                                console.log("receive complete");
                            }
                        });
                    });

            })
    </script>

</body>

</html>